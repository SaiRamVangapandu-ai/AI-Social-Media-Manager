<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Zenoti AI Social Media Intelligence Platform</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet"/>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{background:#050510;font-family:'Inter',-apple-system,sans-serif;color:white;min-height:100vh}
input,textarea,select{font-family:'Inter',sans-serif}
input::placeholder,textarea::placeholder{color:rgba(255,255,255,0.25)!important}
select option{background:#0a0a1e;color:white}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-thumb{background:rgba(99,102,241,0.3);border-radius:3px}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}
@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
.card{background:rgba(12,12,32,0.85);border:1px solid rgba(99,102,241,0.18);border-radius:20px;backdrop-filter:blur(24px);box-shadow:0 8px 32px rgba(0,0,0,0.4),inset 0 1px 0 rgba(255,255,255,0.04);padding:24px;margin-bottom:16px}
.grad-border{border-radius:22px;padding:1.5px;background:linear-gradient(135deg,rgba(99,102,241,0.6),rgba(168,85,247,0.5),rgba(236,72,153,0.4));margin-bottom:16px}
.grad-border-inner{background:rgba(8,8,28,0.97);border-radius:21px;padding:22px}
.lbl{color:rgba(165,180,252,0.75);font-size:10.5px;font-weight:700;letter-spacing:0.12em;text-transform:uppercase;margin-bottom:8px}
.inp{width:100%;background:rgba(255,255,255,0.035);border:1px solid rgba(99,102,241,0.18);border-radius:12px;color:rgba(255,255,255,0.9);font-size:14px;padding:11px 15px;outline:none;transition:border-color 0.2s;resize:none}
.inp:focus{border-color:rgba(99,102,241,0.55)}
.sel{width:100%;background:rgba(8,8,28,0.95);border:1px solid rgba(99,102,241,0.22);border-radius:11px;color:rgba(255,255,255,0.82);font-size:13px;padding:9px 13px;outline:none;cursor:pointer}
.btn{border:none;border-radius:13px;color:white;font-weight:700;font-size:14px;padding:13px 22px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:7px;transition:all 0.18s;width:100%}
.btn:disabled{opacity:0.45;cursor:not-allowed}
.btn:hover:not(:disabled){transform:translateY(-1px)}
.tab-btn{border-radius:11px;border:1px solid rgba(255,255,255,0.07);color:rgba(255,255,255,0.45);font-weight:600;font-size:13px;padding:9px 17px;cursor:pointer;transition:all 0.18s;display:inline-flex;align-items:center;gap:6px;background:rgba(255,255,255,0.04)}
.tab-btn.active{background:linear-gradient(135deg,#6366f1,#8b5cf6);border-color:rgba(99,102,241,0.6);color:white;box-shadow:0 0 20px rgba(99,102,241,0.28)}
.chip{background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.07);border-radius:20px;color:rgba(255,255,255,0.38);font-size:12px;font-weight:600;padding:5px 13px;cursor:pointer;transition:all 0.14s;white-space:nowrap}
.chip.active{background:linear-gradient(135deg,rgba(99,102,241,0.4),rgba(168,85,247,0.35));border-color:rgba(99,102,241,0.55);color:#c4b5fd}
.minibar-wrap{background:rgba(255,255,255,0.05);border-radius:4px;overflow:hidden;flex:1}
.minibar-fill{height:6px;border-radius:4px;transition:width 0.8s ease}
.post-card{background:rgba(255,255,255,0.025);border:1px solid rgba(99,102,241,0.12);border-radius:15px;padding:18px;margin-bottom:12px;animation:fadeIn 0.3s ease}
.section-head{display:flex;align-items:center;gap:10px;margin-bottom:16px}
.section-head-icon{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,rgba(99,102,241,0.25),rgba(168,85,247,0.25));border:1px solid rgba(99,102,241,0.3);font-size:17px;flex-shrink:0}
.section-divider{height:1px;background:linear-gradient(90deg,rgba(99,102,241,0.35),transparent);margin-bottom:20px}
.free-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(16,185,129,0.12);border:1px solid rgba(16,185,129,0.3);border-radius:20px;padding:4px 12px;font-size:11px;font-weight:700;color:#6ee7b7;margin-bottom:16px}
</style>
</head>
<body>
<div id="app" style="max-width:760px;margin:0 auto;padding:0 20px 60px">

<div style="position:fixed;top:-150px;left:-150px;width:500px;height:500px;border-radius:50%;background:radial-gradient(circle,rgba(99,102,241,0.07),transparent 70%);pointer-events:none;z-index:0"></div>
<div style="position:fixed;bottom:-150px;right:-150px;width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(168,85,247,0.06),transparent 70%);pointer-events:none;z-index:0"></div>

<!-- HEADER -->
<div style="text-align:center;padding:44px 0 28px;position:relative;z-index:1">
  <div style="display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,rgba(99,102,241,0.15),rgba(168,85,247,0.15));border:1px solid rgba(99,102,241,0.35);border-radius:20px;padding:4px 14px;margin-bottom:14px">
    <span style="width:6px;height:6px;border-radius:50%;background:#10b981;display:inline-block;animation:pulse 2s infinite"></span>
    <span style="font-size:11px;font-weight:700;color:#a5b4fc;letter-spacing:0.1em;text-transform:uppercase">@gozenoti Â· Live Profile Data</span>
  </div>
  <h1 style="font-size:34px;font-weight:900;margin:0 0 8px;background:linear-gradient(135deg,#e0e7ff 0%,#a5b4fc 35%,#c084fc 65%,#f0abfc 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-0.025em;line-height:1.15">AI Social Media Intelligence Platform</h1>
  <p style="color:rgba(255,255,255,0.35);font-size:14px;margin-bottom:14px">Predict Â· Personalize Â· Automate Â· Amplify</p>
  <div class="free-badge">ğŸ†“ 100% Free â€” No API Key Required</div>
  <div style="display:flex;justify-content:center;gap:24px;margin-top:12px;flex-wrap:wrap">
    <span style="color:rgba(165,180,252,0.6);font-size:12px;font-weight:600">ğŸ“¸ 14K IG</span>
    <span style="color:rgba(165,180,252,0.6);font-size:12px;font-weight:600">ğŸ’¼ 68.8K LI</span>
    <span style="color:rgba(165,180,252,0.6);font-size:12px;font-weight:600">ğŸ¦ 1.3K X</span>
    <span style="color:rgba(165,180,252,0.6);font-size:12px;font-weight:600">ğŸ‘¥ 12.4K FB</span>
  </div>
</div>

<!-- FREE NOTICE -->
<div class="grad-border" style="position:relative;z-index:1">
  <div class="grad-border-inner">
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px">
      <div style="text-align:center;padding:10px">
        <div style="font-size:24px;margin-bottom:6px">ğŸ¤–</div>
        <div style="font-size:12.5px;font-weight:700;color:white;margin-bottom:3px">AI Posts</div>
        <div style="font-size:11px;color:rgba(255,255,255,0.4)">Powered by free AI â€” no key needed</div>
      </div>
      <div style="text-align:center;padding:10px;border-left:1px solid rgba(99,102,241,0.2);border-right:1px solid rgba(99,102,241,0.2)">
        <div style="font-size:24px;margin-bottom:6px">ğŸ–¼ï¸</div>
        <div style="font-size:12.5px;font-weight:700;color:white;margin-bottom:3px">Images</div>
        <div style="font-size:11px;color:rgba(255,255,255,0.4)">Add Freepik key for real AI images</div>
      </div>
      <div style="text-align:center;padding:10px">
        <div style="font-size:24px;margin-bottom:6px">ğŸ“Š</div>
        <div style="font-size:12.5px;font-weight:700;color:white;margin-bottom:3px">Analytics</div>
        <div style="font-size:11px;color:rgba(255,255,255,0.4)">Real @gozenoti data â€” always free</div>
      </div>
    </div>
    <div style="margin-top:16px;border-top:1px solid rgba(99,102,241,0.15);padding-top:14px">
      <div class="lbl">Freepik API Key (Optional â€” only for real AI image & video generation)</div>
      <input id="freepikKey" class="inp" type="password" placeholder="FPSX-... (optional, get free $5 credits at freepik.com/api)"/>
    </div>
  </div>
</div>

<!-- TABS -->
<div style="display:flex;gap:7px;margin-bottom:18px;flex-wrap:wrap;position:relative;z-index:1">
  <button class="tab-btn active" onclick="switchTab('analytics',this)">ğŸ“Š Analytics</button>
  <button class="tab-btn" onclick="switchTab('predict',this)">ğŸ”¬ Viral Predictor</button>
  <button class="tab-btn" onclick="switchTab('create',this)">âœï¸ Create</button>
  <button class="tab-btn" onclick="switchTab('persona',this)">ğŸ­ Persona AI</button>
  <button class="tab-btn" onclick="switchTab('repurpose',this)">â™»ï¸ Repurpose</button>
  <button class="tab-btn" onclick="switchTab('calendar',this)">ğŸ“… Calendar <span style="background:#ef4444;border-radius:20px;font-size:9px;font-weight:800;padding:1px 5px;color:white" id="calBadge">4</span></button>
</div>

<!-- ANALYTICS -->
<div id="panel-analytics" class="tab-panel" style="position:relative;z-index:1">
  <div class="card" style="box-shadow:0 0 40px rgba(225,48,108,0.08),0 8px 32px rgba(0,0,0,0.4)">
    <div class="section-head"><div class="section-head-icon">ğŸ“¸</div><div><div style="color:white;font-weight:700;font-size:15.5px">@gozenoti Instagram</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">14K followers Â· 1,089 posts Â· 1.2% engagement</div></div></div>
    <div class="section-divider"></div>
    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:20px">
      <div style="background:rgba(225,48,108,0.08);border:1px solid rgba(225,48,108,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ‘¥</div><div style="font-size:20px;font-weight:800">14K</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">Followers</div></div>
      <div style="background:rgba(225,48,108,0.08);border:1px solid rgba(225,48,108,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ–¼ï¸</div><div style="font-size:20px;font-weight:800">1,089</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">Posts</div></div>
      <div style="background:rgba(225,48,108,0.08);border:1px solid rgba(225,48,108,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ’¬</div><div style="font-size:20px;font-weight:800">1.2%</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">Eng Rate</div></div>
      <div style="background:rgba(225,48,108,0.08);border:1px solid rgba(225,48,108,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ“¡</div><div style="font-size:20px;font-weight:800">18.6K</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">Avg Reach</div></div>
    </div>
    <div class="lbl">Content Format Performance</div>
    <div id="ig-perf"></div>
    <div class="lbl" style="margin-top:16px">Top Hashtags</div>
    <div id="ig-tags"></div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:16px">
      <div style="background:rgba(99,102,241,0.08);border:1px solid rgba(99,102,241,0.2);border-radius:12px;padding:12px 16px"><div style="font-size:11px;color:#a5b4fc;font-weight:700;margin-bottom:4px">â° Best Posting Time</div><div style="font-size:14px;color:white;font-weight:600">Mon/Wed/Fri 6â€“8pm</div></div>
      <div style="background:rgba(16,185,129,0.08);border:1px solid rgba(16,185,129,0.2);border-radius:12px;padding:12px 16px"><div style="font-size:11px;color:#6ee7b7;font-weight:700;margin-bottom:4px">ğŸ“ˆ Monthly Growth</div><div style="font-size:14px;color:white;font-weight:600">+3.8% Â· +512 followers</div></div>
    </div>
  </div>
  <div class="card" style="box-shadow:0 0 40px rgba(0,119,181,0.08),0 8px 32px rgba(0,0,0,0.4)">
    <div class="section-head"><div class="section-head-icon">ğŸ’¼</div><div><div style="color:white;font-weight:700;font-size:15.5px">Zenoti LinkedIn</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">68.8K followers Â· 862 employees Â· 30K+ customers Â· $1.5B valuation</div></div></div>
    <div class="section-divider"></div>
    <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:20px">
      <div style="background:rgba(0,119,181,0.08);border:1px solid rgba(0,119,181,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ‘¥</div><div style="font-size:20px;font-weight:800">68.8K</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">Followers</div></div>
      <div style="background:rgba(0,119,181,0.08);border:1px solid rgba(0,119,181,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ’¬</div><div style="font-size:20px;font-weight:800">2.1%</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">Eng Rate</div></div>
      <div style="background:rgba(0,119,181,0.08);border:1px solid rgba(0,119,181,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ‘ï¸</div><div style="font-size:20px;font-weight:800">8.4K</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">Avg Impressions</div></div>
      <div style="background:rgba(0,119,181,0.08);border:1px solid rgba(0,119,181,0.2);border-radius:14px;padding:14px;text-align:center"><div style="font-size:18px;margin-bottom:4px">ğŸ“ˆ</div><div style="font-size:20px;font-weight:800">+2.2K</div><div style="font-size:10px;color:rgba(255,255,255,0.4);text-transform:uppercase;letter-spacing:0.06em;margin-top:2px">New/Month</div></div>
    </div>
    <div class="lbl">âš¡ LinkedIn 2025 Algorithm Insights</div>
    <div id="li-insights"></div>
  </div>
  <div class="card">
    <div class="section-head"><div class="section-head-icon">ğŸ”¥</div><div><div style="color:white;font-weight:700;font-size:15.5px">Trending Topics for @gozenoti</div></div></div>
    <div class="section-divider"></div>
    <div id="trending"></div>
  </div>
</div>

<!-- VIRAL PREDICTOR -->
<div id="panel-predict" class="tab-panel" style="display:none;position:relative;z-index:1">
  <div class="card">
    <div class="section-head"><div class="section-head-icon">ğŸ”¬</div><div><div style="color:white;font-weight:700;font-size:15.5px">Viral Score Analyzer</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">Paste your draft â€” AI scores its performance potential</div></div></div>
    <div class="section-divider"></div>
    <div class="lbl">Platform</div>
    <div style="display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap">
      <button class="chip active" onclick="selViralPlat(this,'linkedin')">ğŸ’¼ LinkedIn</button>
      <button class="chip" onclick="selViralPlat(this,'instagram')">ğŸ“¸ Instagram</button>
      <button class="chip" onclick="selViralPlat(this,'twitter')">ğŸ¦ X / Twitter</button>
      <button class="chip" onclick="selViralPlat(this,'facebook')">ğŸ‘¥ Facebook</button>
    </div>
    <div class="lbl">Draft Post</div>
    <textarea id="viralDraft" class="inp" rows="4" placeholder="Paste your post draft here to analyze its viral potentialâ€¦"></textarea>
    <button class="btn" onclick="analyzeViral()" id="viralBtn" style="background:linear-gradient(135deg,#f59e0b,#ef4444);margin-top:12px">ğŸ”¬ Analyze Viral Potential</button>
    <div id="viralResult" style="margin-top:20px"></div>
  </div>
</div>

<!-- CREATE -->
<div id="panel-create" class="tab-panel" style="display:none;position:relative;z-index:1">
  <div class="card">
    <div class="section-head"><div class="section-head-icon">ğŸ¨</div><div><div style="color:white;font-weight:700;font-size:15.5px">What type of post do you want to create?</div></div></div>
    <div class="section-divider"></div>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px">
      <button onclick="selPostType('text')" id="pt-text" style="background:linear-gradient(135deg,rgba(99,102,241,0.33),rgba(99,102,241,0.18));border:2px solid rgba(99,102,241,0.88);border-radius:16px;padding:18px 12px;cursor:pointer;text-align:center;transform:translateY(-2px)">
        <div style="font-size:26px;margin-bottom:8px">âœï¸</div><div style="font-size:13px;font-weight:700;color:white;margin-bottom:4px">Text Post</div>
        <div style="font-size:10px;color:#6366f1;line-height:1.4">Pure copy â€” free AI</div>
        <div style="margin-top:8px;width:22px;height:22px;border-radius:11px;background:#6366f1;margin-left:auto;margin-right:auto;display:flex;align-items:center;justify-content:center;font-size:12px;color:white;font-weight:800">âœ“</div>
      </button>
      <button onclick="selPostType('image')" id="pt-image" style="background:rgba(255,255,255,0.03);border:2px solid rgba(255,255,255,0.07);border-radius:16px;padding:18px 12px;cursor:pointer;text-align:center">
        <div style="font-size:26px;margin-bottom:8px">ğŸ–¼ï¸</div><div style="font-size:13px;font-weight:700;color:rgba(255,255,255,0.55);margin-bottom:4px">Image Post</div>
        <div style="font-size:10px;color:rgba(255,255,255,0.3);line-height:1.4">Freepik key needed</div>
      </button>
      <button onclick="selPostType('video')" id="pt-video" style="background:rgba(255,255,255,0.03);border:2px solid rgba(255,255,255,0.07);border-radius:16px;padding:18px 12px;cursor:pointer;text-align:center">
        <div style="font-size:26px;margin-bottom:8px">ğŸ¬</div><div style="font-size:13px;font-weight:700;color:rgba(255,255,255,0.55);margin-bottom:4px">Video Post</div>
        <div style="font-size:10px;color:rgba(255,255,255,0.3);line-height:1.4">Freepik key needed</div>
      </button>
    </div>
  </div>
  <div class="card">
    <div class="section-head"><div class="section-head-icon">âœï¸</div><div><div style="color:white;font-weight:700;font-size:15.5px">Content Brief</div></div></div>
    <div class="section-divider"></div>
    <div style="margin-bottom:14px"><div class="lbl">Topic / Brief *</div><textarea id="postTopic" class="inp" rows="3" placeholder="e.g. Zenoti AI booking launch â€” trusted by 30k+ salonsâ€¦"></textarea></div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:14px">
      <div><div class="lbl">Platforms</div>
        <div style="display:flex;flex-wrap:wrap;gap:6px">
          <button class="chip active" onclick="togPlat(this,'linkedin')">ğŸ’¼ LinkedIn</button>
          <button class="chip active" onclick="togPlat(this,'instagram')">ğŸ“¸ Instagram</button>
          <button class="chip" onclick="togPlat(this,'twitter')">ğŸ¦ X</button>
          <button class="chip" onclick="togPlat(this,'facebook')">ğŸ‘¥ Facebook</button>
        </div>
      </div>
      <div><div class="lbl">Tone</div>
        <div style="display:flex;flex-wrap:wrap;gap:6px">
          <button class="chip active" onclick="selTone(this,'Professional')">Professional</button>
          <button class="chip" onclick="selTone(this,'Casual & Fun')">Casual</button>
          <button class="chip" onclick="selTone(this,'Inspirational')">Inspirational</button>
          <button class="chip" onclick="selTone(this,'Educational')">Educational</button>
        </div>
      </div>
    </div>
    <div style="margin-bottom:14px"><div class="lbl">Extra Context</div><input id="postExtra" class="inp" placeholder="e.g. mention 30k+ salons milestoneâ€¦"/></div>
  </div>
  <div id="text-panel" class="card">
    <div class="section-head"><div class="section-head-icon">ğŸ“</div><div><div style="color:white;font-weight:700;font-size:15.5px">Text Post Generator</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">Free AI writes copy using @gozenoti's real voice & hashtags</div></div></div>
    <div class="section-divider"></div>
    <button class="btn" onclick="genPosts()" id="genPostsBtn" style="background:linear-gradient(135deg,#6366f1,#8b5cf6);margin-bottom:16px">âœ¨ Generate Text Posts â€” Free</button>
    <div id="postsOut"></div>
  </div>
  <div id="image-panel" class="card" style="display:none">
    <div class="section-head"><div class="section-head-icon">ğŸ–¼ï¸</div><div><div style="color:white;font-weight:700;font-size:15.5px">Image Post Generator</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">Freepik AI generates real JPEG images</div></div></div>
    <div class="section-divider"></div>
    <div id="imgKeyWarn" style="background:rgba(239,68,68,0.08);border:1px solid rgba(239,68,68,0.25);border-radius:12px;padding:12px 16px;margin-bottom:16px;color:#fca5a5;font-size:12.5px">âš ï¸ Freepik API key required â€” enter it in the Configuration section above. Get free $5 credits at <a href="https://freepik.com/api" target="_blank" style="color:#a5b4fc">freepik.com/api</a></div>
    <div style="margin-bottom:12px"><div class="lbl">Image Prompt *</div><textarea id="imgPrompt" class="inp" rows="3" placeholder="Describe your visual â€” e.g. Professional salon with AI booking screen, warm lightingâ€¦"></textarea></div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px">
      <div><div class="lbl">Style</div><select id="imgStyle" class="sel"><option>realistic</option><option>cinematic</option><option>digital-art</option><option>anime</option><option>oil-painting</option><option>3d-render</option><option>minimalist</option><option>watercolor</option></select></div>
      <div><div class="lbl">Size</div><select id="imgSize" class="sel"><option value="square_1_1">1:1 Square</option><option value="portrait_4_5">4:5 Portrait</option><option value="widescreen_16_9">16:9 Wide</option><option value="vertical_9_16">9:16 Story</option></select></div>
    </div>
    <button class="btn" onclick="genImage()" id="genImgBtn" style="background:linear-gradient(135deg,#10b981,#6366f1);margin-bottom:14px">ğŸ–¼ï¸ Generate Real Image</button>
    <div id="imgStatus"></div><div id="imgOut"></div>
  </div>
  <div id="video-panel" class="card" style="display:none">
    <div class="section-head"><div class="section-head-icon">ğŸ¬</div><div><div style="color:white;font-weight:700;font-size:15.5px">Video Post Generator</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">Freepik Kling v3 Pro Â· 60â€“120s render</div></div></div>
    <div class="section-divider"></div>
    <div style="background:rgba(245,158,11,0.07);border:1px solid rgba(245,158,11,0.2);border-radius:10px;padding:9px 13px;margin-bottom:14px;color:rgba(253,224,71,0.7);font-size:11.5px">âš¡ Kling v3 Pro Â· ~$0.49 per 5s Â· Requires Freepik API key above</div>
    <div style="margin-bottom:12px"><div class="lbl">Video Prompt *</div><textarea id="vidPrompt" class="inp" rows="3" placeholder="Describe the scene, action, camera movement, moodâ€¦"></textarea></div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px">
      <div><div class="lbl">Aspect</div><select id="vidAspect" class="sel"><option value="16:9">ğŸ–¥ï¸ 16:9 Landscape</option><option value="9:16">ğŸ“± 9:16 Reels</option><option value="1:1">â¬› 1:1 Square</option></select></div>
      <div><div class="lbl">Duration</div><select id="vidDur" class="sel"><option value="5">5s (~$0.49)</option><option value="10">10s (~$0.98)</option><option value="15">15s (~$1.47)</option></select></div>
    </div>
    <button class="btn" onclick="genVideo()" id="genVidBtn" style="background:linear-gradient(135deg,#db2777,#9333ea);margin-bottom:14px">ğŸ¬ Generate Video</button>
    <div id="vidStatus"></div><div id="vidOut"></div>
  </div>
</div>

<!-- PERSONA AI -->
<div id="panel-persona" class="tab-panel" style="display:none;position:relative;z-index:1">
  <div class="card">
    <div class="section-head"><div class="section-head-icon">ğŸ­</div><div><div style="color:white;font-weight:700;font-size:15.5px">Persona-Based Content Variants</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">One topic â†’ 4 unique variants targeting your audience â€” Free</div></div></div>
    <div class="section-divider"></div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px">
      <div><div class="lbl">Platform</div>
        <div style="display:flex;gap:6px;flex-wrap:wrap">
          <button class="chip active" onclick="selPersPlat(this,'instagram')">ğŸ“¸</button>
          <button class="chip" onclick="selPersPlat(this,'linkedin')">ğŸ’¼</button>
          <button class="chip" onclick="selPersPlat(this,'twitter')">ğŸ¦</button>
          <button class="chip" onclick="selPersPlat(this,'facebook')">ğŸ‘¥</button>
        </div>
        <input type="hidden" id="persPlat" value="instagram"/>
      </div>
      <div><div class="lbl">Audience Persona</div>
        <select id="persType" class="sel">
          <option value="Salon Owner (Business-minded, ROI focused, 35-50yo)">ğŸ’‡ Salon Owner</option>
          <option value="Spa Manager (Wellness focused, 28-45yo)">ğŸ§– Spa Manager</option>
          <option value="Wellness Coach (Holistic, community-driven, 25-40yo)">ğŸ§˜ Wellness Coach</option>
          <option value="Beauty Pro (Trend-driven, visual, 22-35yo)">ğŸ’„ Beauty Pro</option>
        </select>
      </div>
    </div>
    <div style="margin-bottom:14px"><div class="lbl">Topic</div><input id="persTopic" class="inp" placeholder="e.g. AI appointment booking saves 3 hours a weekâ€¦"/></div>
    <button class="btn" onclick="genPersona()" id="persBtn" style="background:linear-gradient(135deg,#8b5cf6,#ec4899)">ğŸ­ Generate 4 Persona Variants â€” Free</button>
    <div id="persOut" style="margin-top:20px"></div>
  </div>
</div>

<!-- REPURPOSE -->
<div id="panel-repurpose" class="tab-panel" style="display:none;position:relative;z-index:1">
  <div class="card">
    <div class="section-head"><div class="section-head-icon">â™»ï¸</div><div><div style="color:white;font-weight:700;font-size:15.5px">Auto-Repurpose Engine</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">One piece of content â†’ 8 platform-optimized formats â€” Free</div></div></div>
    <div class="section-divider"></div>
    <div style="margin-bottom:14px"><div class="lbl">Paste Blog Post, Article, or Any Content</div><textarea id="repInput" class="inp" rows="5" placeholder="Paste your blog post, article, announcementâ€¦"></textarea></div>
    <button class="btn" onclick="genRepurpose()" id="repBtn" style="background:linear-gradient(135deg,#10b981,#6366f1)">â™»ï¸ Repurpose Into 8 Formats â€” Free</button>
    <div id="repOut" style="margin-top:20px"></div>
  </div>
</div>

<!-- CALENDAR -->
<div id="panel-calendar" class="tab-panel" style="display:none;position:relative;z-index:1">
  <div class="card">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:16px">
      <div class="section-head" style="margin-bottom:0">
        <div class="section-head-icon">ğŸ“…</div>
        <div><div style="color:white;font-weight:700;font-size:15.5px">AI Content Calendar</div><div style="color:rgba(255,255,255,0.38);font-size:11.5px">AI-planned schedule Â· Approve or reject</div></div>
      </div>
      <span id="schCount" style="background:rgba(16,185,129,0.15);border:1px solid rgba(16,185,129,0.3);border-radius:20px;color:#6ee7b7;font-size:11px;font-weight:700;padding:4px 12px">3 Scheduled</span>
    </div>
    <div class="section-divider"></div>
    <div id="calItems"></div>
  </div>
</div>

</div>
<script>
// â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const PC={linkedin:'#0077b5',instagram:'#e1306c',twitter:'#1da1f2',facebook:'#1877f2'};
const PI={linkedin:'ğŸ’¼',instagram:'ğŸ“¸',twitter:'ğŸ¦',facebook:'ğŸ‘¥'};
const PL={linkedin:'LinkedIn',instagram:'Instagram',twitter:'X/Twitter',facebook:'Facebook'};
const PM={linkedin:3000,instagram:2200,twitter:280,facebook:500};
const PT={linkedin:'professional, insightful',instagram:'visual, engaging, emotional',twitter:'punchy, witty, concise',facebook:'friendly, community-driven'};

const S={
  viralPlat:'linkedin', postType:'text',
  selPlats:['linkedin','instagram'], tone:'Professional', persPlat:'instagram',
  cal:[
    {id:1,pl:'instagram',type:'Reels',   topic:'AI Booking Demo',         score:94,time:'Mon 6pm', st:'scheduled'},
    {id:2,pl:'linkedin', type:'Article', topic:'Future of Salon Tech',    score:88,time:'Tue 9am', st:'pending'},
    {id:3,pl:'twitter',  type:'Thread',  topic:'5 Wellness Trends 2026',  score:85,time:'Wed 12pm',st:'pending'},
    {id:4,pl:'instagram',type:'Carousel',topic:'Before & After Gallery',  score:91,time:'Wed 6pm', st:'scheduled'},
    {id:5,pl:'facebook', type:'Event',   topic:'Zenoti Webinar Live',     score:79,time:'Thu 2pm', st:'pending'},
    {id:6,pl:'linkedin', type:'Video',   topic:'Customer Success Story',  score:92,time:'Fri 10am',st:'pending'},
    {id:7,pl:'twitter',  type:'Poll',    topic:'Biggest Salon Challenge?',score:83,time:'Fri 1pm', st:'scheduled'},
  ]
};

// â”€â”€ FREE AI via Pollinations text API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function freeAI(prompt){
  const r=await fetch(`https://text.pollinations.ai/${encodeURIComponent(prompt)}?model=openai&json=true`,{headers:{'Accept':'application/json'}});
  const t=await r.text();
  return t;
}

// â”€â”€ HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const $=id=>document.getElementById(id);
const setH=(id,h)=>$(id).innerHTML=h;
const getV=id=>$(id).value.trim();

function switchTab(id,btn){
  document.querySelectorAll('.tab-panel').forEach(p=>p.style.display='none');
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  $('panel-'+id).style.display='block';
  btn.classList.add('active');
  if(id==='calendar') renderCal();
}

function err(id,msg){setH(id,`<div style="background:rgba(239,68,68,0.08);border:1px solid rgba(239,68,68,0.3);border-radius:12px;padding:12px 16px;color:#fca5a5;font-size:13px">âŒ ${msg}</div>`);}

function loading(btn,msg){btn.disabled=true;btn.innerHTML=`<span style="width:14px;height:14px;border:2px solid rgba(255,255,255,0.3);border-top:2px solid white;border-radius:50%;animation:spin 1s linear infinite;display:inline-block;flex-shrink:0"></span> ${msg}`;}
function done(btn,label){btn.disabled=false;btn.innerHTML=label;}

// â”€â”€ CHIP HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function togPlat(el,p){
  el.classList.toggle('active');
  if(el.classList.contains('active')) S.selPlats.push(p);
  else S.selPlats=S.selPlats.filter(x=>x!==p);
}
function selTone(el,t){
  document.querySelectorAll('#panel-create .chip').forEach(c=>{if(c.getAttribute('onclick')?.includes('selTone'))c.classList.remove('active');});
  el.classList.add('active'); S.tone=t;
}
function selViralPlat(el,p){
  el.parentElement.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  el.classList.add('active'); S.viralPlat=p;
}
function selPersPlat(el,p){
  el.parentElement.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  el.classList.add('active'); $('persPlat').value=p;
}
function selPostType(t){
  S.postType=t;
  const colors={text:'#6366f1',image:'#10b981',video:'#ec4899'};
  ['text','image','video'].forEach(x=>{
    const b=$('pt-'+x);
    const active=x===t;
    b.style.background=active?`linear-gradient(135deg,${colors[x]}33,${colors[x]}18)`:'rgba(255,255,255,0.03)';
    b.style.border=`2px solid ${active?colors[x]+'88':'rgba(255,255,255,0.07)'}`;
    b.style.transform=active?'translateY(-2px)':'none';
    // remove old checkmark
    const old=b.querySelector('.chk');
    if(old) old.remove();
    if(active){
      const chk=document.createElement('div');
      chk.className='chk';
      chk.style.cssText=`margin-top:8px;width:22px;height:22px;border-radius:11px;background:${colors[x]};margin-left:auto;margin-right:auto;display:flex;align-items:center;justify-content:center;font-size:12px;color:white;font-weight:800`;
      chk.textContent='âœ“'; b.appendChild(chk);
    }
  });
  $('text-panel').style.display=t==='text'?'block':'none';
  $('image-panel').style.display=t==='image'?'block':'none';
  $('video-panel').style.display=t==='video'?'block':'none';
}

// â”€â”€ VIRAL ANALYZER (Free AI) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function analyzeViral(){
  const draft=getV('viralDraft');
  if(!draft){alert('Please enter a post draft');return;}
  const btn=$('viralBtn');
  loading(btn,'Analyzingâ€¦');
  setH('viralResult','');
  try{
    const prompt=`You are a viral content analyst for Zenoti social media. Analyze this ${S.viralPlat} post and return ONLY a valid JSON object with no extra text:
Post: "${draft}"
Return exactly this JSON structure:
{"viralScore":78,"engagementPrediction":"8-12%","reachEstimate":"45K-80K","hookStrength":72,"emotionalTrigger":85,"shareability":68,"clarity":90,"ctaStrength":60,"bestTimeToPost":"Wed 6-8pm","strengths":["Strong hook","Relevant topic"],"improvements":["Add CTA","Use hashtags"],"rewrittenHook":"Better opening line here","verdict":"Overall assessment of the post in 1-2 sentences."}`;
    const raw=await freeAI(prompt);
    const cleaned=raw.replace(/```json|```/g,'').trim();
    const r=JSON.parse(cleaned);
    const sc=s=>s>=85?'#10b981':s>=70?'#f59e0b':'#ef4444';
    const ring=(score,lbl,sz=80)=>{
      const r2=30,ci=2*Math.PI*r2,d=(score/100)*ci,c=sc(score);
      return `<div style="display:flex;flex-direction:column;align-items:center;gap:5px"><svg width="${sz}" height="${sz}" viewBox="0 0 72 72"><circle cx="36" cy="36" r="${r2}" fill="none" stroke="rgba(255,255,255,0.06)" stroke-width="5"/><circle cx="36" cy="36" r="${r2}" fill="none" stroke="${c}" stroke-width="5" stroke-dasharray="${d} ${ci-d}" stroke-dashoffset="${ci/4}" stroke-linecap="round" style="filter:drop-shadow(0 0 6px ${c})"/><text x="36" y="40" text-anchor="middle" fill="white" font-size="14" font-weight="800">${score}</text></svg>${lbl?`<span style="font-size:9px;color:rgba(255,255,255,0.38);font-weight:700;text-transform:uppercase;letter-spacing:0.08em">${lbl}</span>`:''}</div>`;
    };
    setH('viralResult',`
      <div style="display:flex;gap:12px;align-items:center;justify-content:center;margin-bottom:20px;flex-wrap:wrap">
        ${ring(r.viralScore,'Viral Score')}${ring(r.hookStrength,'Hook',64)}${ring(r.emotionalTrigger,'Emotion',64)}${ring(r.shareability,'Share',64)}${ring(r.ctaStrength,'CTA',64)}
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px">
        ${[['ğŸ“Š Engagement',r.engagementPrediction],['ğŸ“¡ Reach',r.reachEstimate],['â° Best Time',r.bestTimeToPost],['ğŸ¯ Clarity',r.clarity+'/100']].map(([l,v])=>`<div style="background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);border-radius:12px;padding:12px"><div style="font-size:10px;color:rgba(255,255,255,0.38);margin-bottom:3px">${l}</div><div style="font-size:15px;font-weight:700">${v}</div></div>`).join('')}
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px">
        <div style="background:rgba(16,185,129,0.07);border:1px solid rgba(16,185,129,0.2);border-radius:12px;padding:14px">
          <div style="font-size:10px;color:#6ee7b7;font-weight:700;margin-bottom:8px">âœ… STRENGTHS</div>
          ${(r.strengths||[]).map(s=>`<div style="font-size:12px;color:rgba(255,255,255,0.65);margin-bottom:5px;display:flex;gap:5px"><span style="color:#10b981">+</span>${s}</div>`).join('')}
        </div>
        <div style="background:rgba(239,68,68,0.07);border:1px solid rgba(239,68,68,0.2);border-radius:12px;padding:14px">
          <div style="font-size:10px;color:#fca5a5;font-weight:700;margin-bottom:8px">âš¡ IMPROVEMENTS</div>
          ${(r.improvements||[]).map(s=>`<div style="font-size:12px;color:rgba(255,255,255,0.65);margin-bottom:5px;display:flex;gap:5px"><span style="color:#f59e0b">â†’</span>${s}</div>`).join('')}
        </div>
      </div>
      <div style="background:rgba(99,102,241,0.08);border:1px solid rgba(99,102,241,0.22);border-radius:12px;padding:14px;margin-bottom:14px;border-left:3px solid #6366f1">
        <div style="font-size:10px;color:#a5b4fc;font-weight:700;margin-bottom:5px">ğŸª„ AI REWRITES YOUR HOOK</div>
        <div style="font-size:13px;color:#c4b5fd;font-style:italic;line-height:1.6">"${r.rewrittenHook}"</div>
      </div>
      <div style="background:rgba(255,255,255,0.03);border-radius:12px;padding:14px">
        <div style="font-size:10px;color:rgba(255,255,255,0.38);font-weight:700;margin-bottom:4px">ğŸ§  AI VERDICT</div>
        <div style="font-size:13px;color:rgba(255,255,255,0.75);line-height:1.6">${r.verdict}</div>
      </div>`);
  }catch(e){err('viralResult','Analysis failed: '+e.message+'. Please try again.');}
  done(btn,'ğŸ”¬ Analyze Viral Potential');
}

// â”€â”€ GENERATE POSTS (Free AI) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function genPosts(){
  const topic=getV('postTopic');
  if(!topic){alert('Please enter a topic');return;}
  const btn=$('genPostsBtn');
  loading(btn,'Generatingâ€¦');
  setH('postsOut','');
  try{
    const pd=S.selPlats.map(id=>`${PL[id]}: max ${PM[id]} chars, tone: ${PT[id]}`).join(' | ');
    const extra=getV('postExtra');
    const prompt=`You are a social media manager for Zenoti (@gozenoti, beauty & wellness SaaS, trusted by 30k+ salons). Create platform-native social media posts.
Topic: ${topic}
Tone: ${S.tone}${extra?'\nExtra context: '+extra:''}
Hashtags to include where relevant: #GoZenoti #BeautyAndWellness #SalonTech #MedSpa
Platforms: ${pd}
Return ONLY a valid JSON object, no extra text: { ${S.selPlats.map(id=>`"${id}": "post content here"`).join(', ')} }`;
    const raw=await freeAI(prompt);
    const posts=JSON.parse(raw.replace(/```json|```/g,'').trim());
    let html=`<div style="display:flex;gap:6px;margin-bottom:14px;flex-wrap:wrap">`;
    S.selPlats.forEach((id,i)=>{ html+=`<button class="chip${i===0?' active':''}" onclick="showPost(this,'${id}')">${PI[id]} ${PL[id]}</button>`; });
    html+=`<button class="chip" onclick="showAllPosts(this)">ğŸ“‹ All</button></div><div id="postCards">`;
    S.selPlats.forEach((id,i)=>{
      if(!posts[id]) return;
      html+=`<div class="post-card" data-p="${id}" style="${i>0?'display:none':''}">
        <div style="display:flex;justify-content:space-between;margin-bottom:10px">
          <span style="color:rgba(255,255,255,0.65);font-weight:600;font-size:12.5px">${PI[id]} ${PL[id]}</span>
          <span style="color:rgba(255,255,255,0.25);font-size:10.5px;font-family:monospace">${posts[id].length}/${PM[id]}</span>
        </div>
        <p style="color:rgba(255,255,255,0.78);font-size:13.5px;line-height:1.72;white-space:pre-wrap;margin-bottom:12px">${posts[id]}</p>
        <button onclick="cpBtn(this)" data-t="${posts[id].replace(/"/g,'&quot;').replace(/'/g,'&#39;')}" style="background:rgba(99,102,241,0.12);border:1px solid rgba(99,102,241,0.28);border-radius:8px;color:#a5b4fc;font-size:11.5px;font-weight:600;padding:5px 13px;cursor:pointer">â˜ Copy</button>
      </div>`;
    });
    html+=`</div><button onclick="genPosts()" style="width:100%;margin-top:8px;background:transparent;border:1px solid rgba(99,102,241,0.22);border-radius:11px;color:rgba(165,180,252,0.55);font-size:12.5px;font-weight:600;padding:10px;cursor:pointer">ğŸ”„ Regenerate</button>`;
    setH('postsOut',html);
  }catch(e){err('postsOut','Post generation failed. Please try again.');}
  done(btn,'âœ¨ Generate Text Posts â€” Free');
}

function showPost(el,p){
  document.querySelectorAll('#postCards .post-card').forEach(c=>c.style.display=c.dataset.p===p?'block':'none');
  el.parentElement.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  el.classList.add('active');
}
function showAllPosts(el){
  document.querySelectorAll('#postCards .post-card').forEach(c=>c.style.display='block');
  el.parentElement.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  el.classList.add('active');
}
function cpBtn(b){
  navigator.clipboard.writeText(b.dataset.t).then(()=>{b.textContent='âœ“ Copied';setTimeout(()=>b.textContent='â˜ Copy',2000);});
}

// â”€â”€ IMAGE (Freepik) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function genImage(){
  const fk=getV('freepikKey');
  if(!fk){alert('Please enter your Freepik API key in the Configuration section above');return;}
  const prompt=getV('imgPrompt');
  if(!prompt){alert('Please enter an image prompt');return;}
  const btn=$('genImgBtn');
  loading(btn,'Generating real imageâ€¦');
  setH('imgStatus','<div style="background:rgba(16,185,129,0.07);border:1px solid rgba(16,185,129,0.2);border-radius:12px;padding:12px 16px;color:#6ee7b7;font-size:12.5px;display:flex;align-items:center;gap:8px"><div style="width:14px;height:14px;border:2px solid rgba(16,185,129,0.3);border-top:2px solid #10b981;border-radius:50%;animation:spin 1s linear infinite;flex-shrink:0"></div>Generating via Freepik AIâ€¦ 15-30 seconds</div>');
  setH('imgOut','');
  try{
    const fp=`${prompt}, ${$('imgStyle').value} style, professional high quality social media`;
    const res=await fetch('https://api.freepik.com/v1/ai/text-to-image',{method:'POST',headers:{'Content-Type':'application/json','x-freepik-api-key':fk},body:JSON.stringify({prompt:fp,num_images:1,image:{size:$('imgSize').value},filter_nsfw:true})});
    const data=await res.json();
    if(!res.ok) throw new Error(data?.message||`Freepik error ${res.status}`);
    let imgUrl=null;
    if(data?.data?.length){
      const it=data.data[0];
      imgUrl=it.base64?`data:image/jpeg;base64,${it.base64}`:it.url;
    } else if(data?.data?.task_id){
      const tid=data.data.task_id;
      for(let i=0;i<20;i++){
        await new Promise(r=>setTimeout(r,4000));
        setH('imgStatus',`<div style="background:rgba(99,102,241,0.07);border:1px solid rgba(99,102,241,0.18);border-radius:12px;padding:12px 16px;color:rgba(165,180,252,0.75);font-size:12.5px">âŸ³ Processingâ€¦ ${(i+1)*4}s</div>`);
        const p=await (await fetch(`https://api.freepik.com/v1/ai/text-to-image/${tid}`,{headers:{'x-freepik-api-key':fk}})).json();
        if(p?.data?.status==='COMPLETED'||p?.data?.status==='OK'){
          const imgs=p?.data?.generated||p?.data||[];
          if(imgs[0]) imgUrl=imgs[0].base64?`data:image/jpeg;base64,${imgs[0].base64}`:imgs[0].url;
          break;
        }
        if(p?.data?.status==='FAILED') throw new Error('Freepik task failed');
      }
    }
    if(!imgUrl) throw new Error('No image returned â€” check your Freepik API credits');
    setH('imgStatus','<div style="background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.3);border-radius:12px;padding:10px 14px;color:#6ee7b7;font-size:12px">âœ… Image generated!</div>');
    setH('imgOut',`<div style="position:relative;border-radius:14px;overflow:hidden;border:1px solid rgba(16,185,129,0.25);margin-top:8px"><img src="${imgUrl}" style="width:100%;display:block"/><a href="${imgUrl}" download="zenoti-image.jpg" target="_blank" style="position:absolute;bottom:8px;right:8px;background:rgba(0,0,0,0.75);border:1px solid rgba(255,255,255,0.15);border-radius:8px;color:white;font-size:12px;font-weight:600;padding:5px 11px;text-decoration:none">â¬‡ Save</a></div>`);
  }catch(e){setH('imgStatus','');err('imgOut',e.message);}
  done(btn,'ğŸ–¼ï¸ Generate Real Image');
}

// â”€â”€ VIDEO (Freepik) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function genVideo(){
  const fk=getV('freepikKey');
  if(!fk){alert('Please enter your Freepik API key in the Configuration section above');return;}
  const prompt=getV('vidPrompt');
  if(!prompt){alert('Please enter a video prompt');return;}
  const btn=$('genVidBtn');
  loading(btn,'Submittingâ€¦');
  setH('vidStatus','');setH('vidOut','');
  try{
    const res=await fetch('https://api.freepik.com/v1/ai/video/kling-v3-pro',{method:'POST',headers:{'Content-Type':'application/json','x-freepik-api-key':fk},body:JSON.stringify({prompt,aspect_ratio:$('vidAspect').value,duration:$('vidDur').value,negative_prompt:'blurry, low quality, distorted'})});
    const data=await res.json();
    if(!res.ok) throw new Error(data?.message||`Freepik error ${res.status}`);
    const tid=data?.data?.task_id;
    if(!tid) throw new Error('No task ID returned');
    for(let i=0;i<40;i++){
      await new Promise(r=>setTimeout(r,5000));
      btn.innerHTML=`â³ Renderingâ€¦ ${(i+1)*5}s`;
      setH('vidStatus',`<div style="background:rgba(99,102,241,0.07);border:1px solid rgba(99,102,241,0.18);border-radius:11px;padding:11px 15px;color:rgba(165,180,252,0.75);font-size:12.5px">âŸ³ Renderingâ€¦ ${(i+1)*5}s (up to 120s)</div>`);
      const p=await (await fetch(`https://api.freepik.com/v1/ai/video/kling-v3-pro/${tid}`,{headers:{'x-freepik-api-key':fk}})).json();
      if(p?.data?.status==='COMPLETED'||p?.data?.status==='OK'){
        const url=p?.data?.generated?.[0]?.url||p?.data?.url;
        if(url){
          setH('vidStatus','');
          setH('vidOut',`<div style="border-radius:14px;overflow:hidden;border:1px solid rgba(236,72,153,0.3)"><video src="${url}" controls style="width:100%;display:block"></video><div style="display:flex;gap:8px;padding:10px;background:rgba(255,255,255,0.02)"><a href="${url}" download="zenoti-video.mp4" target="_blank" style="flex:1;text-align:center;padding:9px;border-radius:9px;background:linear-gradient(135deg,#db2777,#9333ea);color:white;font-size:12.5px;font-weight:700;text-decoration:none">â¬‡ Download</a><button onclick="navigator.clipboard.writeText('${url}')" style="padding:9px 14px;border-radius:9px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);color:rgba(255,255,255,0.55);font-size:12.5px;cursor:pointer">ğŸ”— URL</button></div></div>`);
          break;
        }
      }
      if(p?.data?.status==='FAILED') throw new Error('Video failed');
    }
  }catch(e){setH('vidStatus','');err('vidOut',e.message);}
  done(btn,'ğŸ¬ Generate Video');
}

// â”€â”€ PERSONA (Free AI) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function genPersona(){
  const topic=getV('persTopic');
  if(!topic){alert('Please enter a topic');return;}
  const btn=$('persBtn');
  loading(btn,'Generating 4 variantsâ€¦');
  setH('persOut','');
  try{
    const plat=$('persPlat').value;
    const persona=$('persType').value;
    const prompt=`You are a social media expert for Zenoti (@gozenoti, beauty & wellness SaaS). Create 4 COMPLETELY DIFFERENT post variants for: "${topic}" on ${PL[plat]}, targeting: ${persona}.
Each variant must have a unique angle, hook, and emotional appeal.
Return ONLY a valid JSON array, no extra text:
[{"variant":"Variant Name","hook":"Opening line","body":"Full post body max 150 chars","angle":"Strategic angle used","predictedEng":"X-Y%"},{"variant":"...","hook":"...","body":"...","angle":"...","predictedEng":"..."},{"variant":"...","hook":"...","body":"...","angle":"...","predictedEng":"..."},{"variant":"...","hook":"...","body":"...","angle":"...","predictedEng":"..."}]`;
    const raw=await freeAI(prompt);
    const vars=JSON.parse(raw.replace(/```json|```/g,'').trim());
    const cols=['#6366f1','#8b5cf6','#ec4899','#f59e0b'];
    setH('persOut',`<div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;animation:fadeIn 0.3s ease">
      ${vars.slice(0,4).map((v,i)=>`<div style="background:rgba(255,255,255,0.025);border:1px solid ${cols[i]}33;border-radius:15px;padding:16px">
        <div style="display:flex;justify-content:space-between;margin-bottom:10px">
          <span style="font-size:11px;font-weight:700;color:${cols[i]};background:${cols[i]}22;padding:3px 10px;border-radius:20px">${v.variant}</span>
          <span style="font-size:11px;color:#10b981;font-weight:700">${v.predictedEng}</span>
        </div>
        <div style="font-size:13px;font-weight:700;color:white;margin-bottom:6px;line-height:1.5">"${v.hook}"</div>
        <div style="font-size:11.5px;color:rgba(255,255,255,0.5);margin-bottom:8px;line-height:1.6">${v.body}</div>
        <div style="font-size:10.5px;color:${cols[i]};background:${cols[i]}11;padding:5px 10px;border-radius:8px">${v.angle}</div>
      </div>`).join('')}
    </div>`);
  }catch(e){err('persOut','Generation failed. Please try again.');}
  done(btn,'ğŸ­ Generate 4 Persona Variants â€” Free');
}

// â”€â”€ REPURPOSE (Free AI) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function genRepurpose(){
  const input=getV('repInput');
  if(!input){alert('Please paste some content');return;}
  const btn=$('repBtn');
  loading(btn,'Repurposing into 8 formatsâ€¦');
  setH('repOut','');
  try{
    const prompt=`You are a content expert for Zenoti (@gozenoti). Repurpose this content for all platforms. Include hashtags: #GoZenoti #BeautyAndWellness #SalonTech #MedSpa where relevant.
Content: "${input}"
Return ONLY a valid JSON object, no extra text:
{"linkedin_post":"full linkedin post here","linkedin_article_hook":"compelling article hook here","instagram_caption":"instagram caption with hashtags","instagram_story":"short punchy story text","twitter_thread":"Tweet 1 text\n\nTweet 2 text\n\nTweet 3 text","twitter_single":"single tweet under 280 chars","facebook_post":"facebook post text","youtube_short_script":"30 second script here"}`;
    const raw=await freeAI(prompt);
    const r=JSON.parse(raw.replace(/```json|```/g,'').trim());
    const fmts=[
      {k:'linkedin_post',l:'LinkedIn Post',i:'ğŸ’¼',c:'#0077b5'},
      {k:'linkedin_article_hook',l:'LinkedIn Article',i:'ğŸ“°',c:'#0077b5'},
      {k:'instagram_caption',l:'Instagram Caption',i:'ğŸ“¸',c:'#e1306c'},
      {k:'instagram_story',l:'Instagram Story',i:'â­•',c:'#e1306c'},
      {k:'twitter_thread',l:'Twitter Thread',i:'ğŸ§µ',c:'#1da1f2'},
      {k:'twitter_single',l:'Twitter Post',i:'ğŸ¦',c:'#1da1f2'},
      {k:'facebook_post',l:'Facebook Post',i:'ğŸ‘¥',c:'#1877f2'},
      {k:'youtube_short_script',l:'YouTube Short',i:'ğŸ¬',c:'#ff0000'},
    ];
    setH('repOut',`<div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;animation:fadeIn 0.3s ease">
      ${fmts.map(f=>`<div style="background:rgba(255,255,255,0.025);border:1px solid ${f.c}25;border-radius:13px;padding:14px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
          <span style="font-size:11px;font-weight:700;color:${f.c}">${f.i} ${f.l}</span>
          <button onclick="navigator.clipboard.writeText(this.dataset.t);this.textContent='âœ“';setTimeout(()=>this.textContent='â˜',2000)" data-t="${(r[f.k]||'').replace(/"/g,'&quot;').replace(/'/g,'&#39;')}" style="background:transparent;border:1px solid ${f.c}44;border-radius:6px;color:${f.c};font-size:10px;padding:2px 8px;cursor:pointer">â˜</button>
        </div>
        <div style="font-size:12px;color:rgba(255,255,255,0.6);line-height:1.6">${(r[f.k]||'').slice(0,150)}â€¦</div>
      </div>`).join('')}
    </div>`);
  }catch(e){err('repOut','Repurpose failed. Please try again.');}
  done(btn,'â™»ï¸ Repurpose Into 8 Formats â€” Free');
}

// â”€â”€ CALENDAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderCal(){
  const sch=S.cal.filter(x=>x.st==='scheduled').length;
  $('schCount').textContent=`${sch} Scheduled`;
  $('calBadge').textContent=S.cal.filter(x=>x.st==='pending').length;
  const sc=s=>s>=85?'#10b981':s>=70?'#f59e0b':'#ef4444';
  setH('calItems',S.cal.map(item=>{
    const isSch=item.st==='scheduled';
    return `<div style="background:rgba(255,255,255,0.025);border:1px solid ${isSch?'rgba(16,185,129,0.25)':'rgba(255,255,255,0.07)'};border-radius:14px;padding:16px;display:flex;align-items:center;gap:14px;margin-bottom:10px">
      <div style="width:42px;height:42px;border-radius:12px;background:${PC[item.pl]}28;display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0">${PI[item.pl]}</div>
      <div style="flex:1;min-width:0">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px">
          <span style="font-size:13.5px;font-weight:700;color:white">${item.topic}</span>
          <span style="font-size:10px;background:${PC[item.pl]}22;color:${PC[item.pl]};padding:2px 8px;border-radius:20px;font-weight:600">${item.type}</span>
        </div>
        <div style="display:flex;gap:12px;align-items:center">
          <span style="font-size:11.5px;color:rgba(255,255,255,0.38)">â° ${item.time}</span>
          <div style="display:flex;align-items:center;gap:5px;max-width:100px">
            <div class="minibar-wrap"><div class="minibar-fill" style="width:${item.score}%;background:linear-gradient(90deg,${sc(item.score)},${sc(item.score)}99)"></div></div>
            <span style="font-size:11px;font-weight:700;color:white;min-width:22px">${item.score}</span>
          </div>
        </div>
      </div>
      ${isSch
        ?`<span style="background:rgba(16,185,129,0.15);border:1px solid rgba(16,185,129,0.3);border-radius:20px;color:#6ee7b7;font-size:11px;font-weight:700;padding:5px 12px;flex-shrink:0">âœ“ Approved</span>`
        :`<div style="display:flex;gap:8px;flex-shrink:0">
           <button onclick="appCal(${item.id})" style="background:rgba(16,185,129,0.15);border:1px solid rgba(16,185,129,0.3);border-radius:9px;color:#6ee7b7;font-size:12px;font-weight:700;padding:6px 14px;cursor:pointer">âœ“ Approve</button>
           <button onclick="rejCal(${item.id})" style="background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.25);border-radius:9px;color:#fca5a5;font-size:12px;font-weight:700;padding:6px 14px;cursor:pointer">âœ•</button>
         </div>`
      }
    </div>`;
  }).join(''));
}
function appCal(id){S.cal=S.cal.map(x=>x.id===id?{...x,st:'scheduled'}:x);renderCal();}
function rejCal(id){S.cal=S.cal.filter(x=>x.id!==id);renderCal();}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.onload=()=>{
  // IG Performance bars
  $('ig-perf').innerHTML=[['Reels',91],['Carousel',85],['Stories',72],['Image',64],['Link',48]].map(([t,s])=>
    `<div style="display:flex;align-items:center;gap:12px;margin-bottom:10px"><span style="min-width:70px;font-size:12px;color:rgba(255,255,255,0.6);font-weight:600">${t}</span><div class="minibar-wrap"><div class="minibar-fill" style="width:${s}%;background:linear-gradient(90deg,#e1306c,#e1306c99)"></div></div><span style="min-width:30px;font-size:12px;font-weight:700;text-align:right">${s}</span></div>`).join('');

  // IG Hashtags
  $('ig-tags').innerHTML=`<div style="display:flex;flex-wrap:wrap;gap:6px">${['#GoZenoti','#BeautyAndWellness','#SalonTech','#MedSpa','#SpaLife','#AIBeauty'].map(t=>`<span style="background:rgba(225,48,108,0.12);border:1px solid rgba(225,48,108,0.25);border-radius:20px;font-size:11px;color:#f9a8d4;padding:4px 12px;font-weight:600">${t}</span>`).join('')}</div>`;

  // LinkedIn insights
  $('li-insights').innerHTML=['Posts shown to only ~1.6% of followers initially (2025 algorithm)','Comments 15x more valuable than likes for reach','First 60-120 min golden hour determines post fate','Carousels/docs get most saves â†’ best for topic authority','Employee posts get 2.75x more impressions than company page'].map(t=>
    `<div style="display:flex;align-items:flex-start;gap:10px;background:rgba(245,158,11,0.06);border:1px solid rgba(245,158,11,0.15);border-radius:10px;padding:9px 13px;margin-bottom:7px"><span style="color:#fbbf24;font-size:13px;flex-shrink:0">â†’</span><span style="font-size:12px;color:rgba(255,255,255,0.6);line-height:1.6">${t}</span></div>`).join('');

  // Trending
  $('trending').innerHTML=[['AI in Beauty & Wellness',94,'+42%'],['MedSpa Automation',88,'+38%'],['Salon Tech 2026',83,'+31%'],['Self-Care Sunday',79,'+27%'],['AI Appointment Booking',76,'+24%']].map(([t,m,tr],i)=>
    `<div style="display:flex;align-items:center;gap:14px;padding:12px 0;border-bottom:${i<4?'1px solid rgba(255,255,255,0.05)':'none'}"><div style="width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,rgba(99,102,241,0.3),rgba(168,85,247,0.3));display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:800;color:#a5b4fc;flex-shrink:0">${i+1}</div><div style="flex:1"><div style="font-size:14px;font-weight:600;color:white">${t}</div></div><div class="minibar-wrap" style="max-width:80px"><div class="minibar-fill" style="width:${m}%;background:linear-gradient(90deg,#6366f1,#8b5cf6)"></div></div><div style="min-width:42px;text-align:right;font-size:13px;font-weight:700;color:#10b981">${tr}</div></div>`).join('');

  renderCal();

  // Freepik key watcher
  $('freepikKey').addEventListener('input',function(){
    $('imgKeyWarn').style.display=this.value.trim()?'none':'block';
  });
};
</script>
</body>
</html>
